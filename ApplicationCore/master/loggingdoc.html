<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ChimeraTK-ApplicationCore: Logging module and Logger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DESY_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChimeraTK-ApplicationCore
   &#160;<span id="projectnumber">00.15.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Logging module and Logger </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Klaus Zenker (HZDR) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>03.04.2018</dd></dl>
<h1><a class="anchor" id="logginintro"></a>
Introduction to the logging mechanism</h1>
<p>The logging provided here requires to add the LoggingModule to your Application. The module introduces the following input variables, that need to be connected to the control system:</p><ul>
<li>targetStream: Allows to choose where messages send to the logging module end up:<ul>
<li>0: cout/cerr+logfile</li>
<li>1: logfile</li>
<li>2: cout/cerr</li>
<li>3: nowhere</li>
</ul>
</li>
<li>logFile: Give the logfile name. If the file is not empty logging messages will be appended. If you choose targetStream 0 or 1 and don't set a logFile the Logging module simply skips the file writing.</li>
<li>logLevel: Choose a certain logging level of the Module. Messages send to the Logging module also include a logging level. The Logging module compares both levels and decides if a message is dropped (e.g. message level is DEBUG and Module level is ERROR) or broadcasted.</li>
<li>tailLength: The number of messages published by the Logging module (see logTail), i.e. to the control system. This length has no influence on the targetStreams, that receive all messages (depending on the logLevel). The logLevel also applies to messages that are published by the Logging module via the logTail</li>
</ul>
<p>Available logging levels are:</p><ul>
<li>DEBUG</li>
<li>INFO</li>
<li>WARNING</li>
<li>ERROR</li>
<li>SILENT</li>
</ul>
<p>The only variable that is published by the Logging module is the logTail. It contains the list of latest messages. Messages are separated by a newline character. The number of messages published in the logTail is set via the input variable tailLength. Other than that, messages are written to cout/cerr and/or a log file as explained above.</p>
<p>In order to add a source to the Logging module the method <code>addSource(Logger*)</code> is available. The foreseen way of using the Logger is to add a Logger to a module that should send log messages. In the definition of connections of the application (<code>defineConnections()</code> ) one can add this source to the Logging module.</p>
<p>The following example shows how to integrate the Logging module and the Logging into an application (myApp) and one module sending messages (TestModule). </p><div class="fragment"><div class="line">sruct TestModule: <span class="keyword">public</span> <a class="code" href="class_chimera_t_k_1_1_application_module.html">ChimeraTK::ApplicationModule</a>{</div><div class="line">Logger{<span class="keyword">this</span>};</div><div class="line">...</div><div class="line">};</div><div class="line"><span class="keyword">struct </span>myApp : <span class="keyword">public</span> <a class="code" href="class_chimera_t_k_1_1_application.html">ChimeraTK::Application</a>{</div><div class="line"></div><div class="line">LoggingModule log { <span class="keyword">this</span>, <span class="stringliteral">&quot;LoggingModule&quot;</span>, <span class="stringliteral">&quot;LoggingModule test&quot;</span> };</div><div class="line"></div><div class="line"><a class="code" href="class_chimera_t_k_1_1_control_system_module.html">ChimeraTK::ControlSystemModule</a> cs;</div><div class="line"></div><div class="line">TestModule { <span class="keyword">this</span>, <span class="stringliteral">&quot;test&quot;</span>, <span class="stringliteral">&quot;&quot;</span> };</div><div class="line">...</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> myAPP::defineConnctions(){</div><div class="line">cs[<span class="stringliteral">&quot;Logging&quot;</span>](<span class="stringliteral">&quot;targetStream&quot;</span>) &gt;&gt; log.targetStream;</div><div class="line">cs[<span class="stringliteral">&quot;Logging&quot;</span>](<span class="stringliteral">&quot;logLevel&quot;</span>) &gt;&gt; log.logLevel;</div><div class="line">cs[<span class="stringliteral">&quot;Logging&quot;</span>](<span class="stringliteral">&quot;logFile&quot;</span>) &gt;&gt; log.logFile;</div><div class="line">cs[<span class="stringliteral">&quot;Logging&quot;</span>](<span class="stringliteral">&quot;tailLength&quot;</span>) &gt;&gt; log.tailLength;</div><div class="line">log.addSource(&amp;TestModule.logger)</div><div class="line">...</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> TestModule::mainLoop{</div><div class="line">  logger.sendMessage(<span class="stringliteral">&quot;Test&quot;</span>,<a class="code" href="namespacelogging.html#a12e05573477c76b8d6db5081863f4416a682501b7fb187303796e3f533735b51f">LogLevel::DEBUG</a>);</div><div class="line">  ...</div><div class="line">}</div></div><!-- fragment --><p>A message always looks like this: LogLevel::LoggingModuleName/SendingModuleName TimeString -&gt; message<br />
 In the example given above the meassge could look like: </p><div class="fragment"><div class="line">DEBUG::LogggingModule/test 2018-Apr-12 14:03:07.947949 -&gt; Test</div></div><!-- fragment --> <dl class="section remark"><dt>Remarks</dt><dd>Instead of adding a Logger to every module that should feed the Logging module, one could also consider using only one Logger object. This is not thread safe and would not work for multiple modules trying to send messages via the Logger object to the Logging module at the same time. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 18 2018 07:53:28 for ChimeraTK-ApplicationCore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
