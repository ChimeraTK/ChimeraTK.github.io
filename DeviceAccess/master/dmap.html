<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>mtca4u-deviceaccess: Device Mapping</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DESY_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mtca4u-deviceaccess
   &#160;<span id="projectnumber">00.34.00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Device Mapping </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000071">Todo:</a></b></dt><dd>FIXME: This information is outdated.</dd></dl>
<p>adapt it to the URI scheme</p>
<p>A device map file (dmap file) gives an alias for each device file and defines which map file to use with it. Like this it is sort of a crate population file, showing which board is in which slot.</p>
<p>Each row corresponds to one device and each line has three entries </p><ul>
<li>Alias name </li>
<li>Device file </li>
<li>Map file</li>
</ul>
<p>Example: </p><ul>
<li>A dummy device in the pseudo-slot 0 </li>
<li>A board from the machine protection system in slot 5 </li>
<li>A board with a motor driver in slot 6</li>
</ul>
<pre class="fragment">DUMMY /dev/mtcadumms0 mtcadummy_v00.08.map
MPS /dev/pciedevs5 mps_v00.07.map
MOTOR_DRIVER /dev/pciedevs6 DFMC_MD22_v3.0.map
</pre><p>The alias names can be chosen freely by the system integrator. Note that the MPS board and the motor driver use the same driver. The device mapping allows to use convenient alias names in the high level software picking the right board by function and not which slot was used in this particular crate.</p>
<h1><a class="anchor" id="Using"></a>
the device mapping</h1>
<p>The dmapFilesParser allows to conveniently read all dmap files in a given directory. It allows to get the device information (called dmapElem) for a specific alias.</p>
<p>FIXME: Here was an example which has been removed.</p>
<dl class="section note"><dt>Note</dt><dd>This multi-step approach will change, probably using a device factory. </dd>
<dd>
The correlation to the map file will be automated in future. </dd>
<dd>
The whole dmap mechanism might change in favour of the PICMG standard device model approach, or become part of it.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000072">Todo:</a></b></dt><dd>FIXME This is just a code snipped that has been pasted here.</dd></dl>
<p>The device class is an abstract interface which uses backends to communicate with the hardware. These backends implement the protocol to communicate with the hardware. Some of these backends need an additional 'map file', which contains a list of registers and their description. The map file format depends on the backend type. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000073">Todo:</a></b></dt><dd>FIXME: Currently giving a map file name in the dmap file is mandatory. </dd></dl>
<ul>
<li>A 'map' file </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 11 2018 07:53:13 for mtca4u-deviceaccess by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
